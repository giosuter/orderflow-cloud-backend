# === DEV profile ===
spring.datasource.url=jdbc:h2:mem:orderflow_dev;MODE=MySQL;DB_CLOSE_DELAY=-1
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# H2 console (handy locally)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Option A (quickest): disable security auto-config in dev
# (If you add SecurityConfig below, you can remove this line.)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# --- springdoc (limit scanning so one bad class can't break docs) ---
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui/index.html

# Scan only controllers package; match only API paths
springdoc.packages-to-scan=ch.devprojects.orderflow.web
springdoc.paths-to-match=/api/**

# Optional: define a group explicitly (helps with context-path setups)
springdoc.group-configs[0].group=public
springdoc.group-configs[0].paths-to-match=/api/**

# --- Logging to see why /v3/api-docs fails ---
logging.level.org.springdoc=DEBUG
logging.level.org.springframework.web=INFO
spring.mvc.log-resolved-exception=true

# Include error details in the JSON (dev only)
server.error.include-message=ALWAYS
server.error.include-stacktrace=ALWAYS